


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.1.7">
    
    
      
        <title>Talks - Haskell funcstream</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.4c7052ca.min.css">
      
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    <body dir="ltr">
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#talks" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href=".." title="Haskell funcstream" class="md-header-nav__button md-logo" aria-label="Haskell funcstream">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Haskell funcstream
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Talks
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Haskell funcstream" class="md-nav__button md-logo" aria-label="Haskell funcstream">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Haskell funcstream
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../about/" title="About" class="md-nav__link">
      About
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../books/" title="Books" class="md-nav__link">
      Books
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Talks
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>
        </span>
      </label>
    
    <a href="./" title="Talks" class="md-nav__link md-nav__link--active">
      Talks
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#adventures-with-types-spj" class="md-nav__link">
    Adventures with Types - SPJ
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conal-elliott-denotational-design-from-meanings-to-programs" class="md-nav__link">
    Conal Elliott - Denotational Design: From Meanings to Programs
  </a>
  
    <nav class="md-nav" aria-label="Conal Elliott - Denotational Design: From Meanings to Programs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#denotative-programming" class="md-nav__link">
    Denotative programming
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#denotational-design" class="md-nav__link">
    Denotational design
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#broad-outline" class="md-nav__link">
    Broad outline:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#functionality" class="md-nav__link">
    Functionality
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api-first-pass" class="md-nav__link">
    API first pass
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specifying-image-operations" class="md-nav__link">
    Specifying Image operations
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#brian-beckman-dont-fear-the-monad" class="md-nav__link">
    Brian Beckman: Don't fear the Monad
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../online-lectures/" title="Online-lectures" class="md-nav__link">
      Online-lectures
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../blogs/" title="Blogs" class="md-nav__link">
      Blogs
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../papers/" title="Papers" class="md-nav__link">
      Papers
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../code/" title="Code" class="md-nav__link">
      Code
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../categories/" title="Categories" class="md-nav__link">
      Categories
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../observations/" title="Observations" class="md-nav__link">
      Observations
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#adventures-with-types-spj" class="md-nav__link">
    Adventures with Types - SPJ
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conal-elliott-denotational-design-from-meanings-to-programs" class="md-nav__link">
    Conal Elliott - Denotational Design: From Meanings to Programs
  </a>
  
    <nav class="md-nav" aria-label="Conal Elliott - Denotational Design: From Meanings to Programs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#denotative-programming" class="md-nav__link">
    Denotative programming
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#denotational-design" class="md-nav__link">
    Denotational design
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#broad-outline" class="md-nav__link">
    Broad outline:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#functionality" class="md-nav__link">
    Functionality
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api-first-pass" class="md-nav__link">
    API first pass
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specifying-image-operations" class="md-nav__link">
    Specifying Image operations
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#brian-beckman-dont-fear-the-monad" class="md-nav__link">
    Brian Beckman: Don't fear the Monad
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  
                
                
                <h1 id="talks">Talks</h1>
<h2 id="adventures-with-types-spj"><a href="https://youtu.be/6COvD8oynmI">Adventures with Types - SPJ</a></h2>
<h2 id="conal-elliott-denotational-design-from-meanings-to-programs">Conal Elliott - Denotational Design: From Meanings to Programs</h2>
<ul>
<li>youtube link: <a href="https://youtu.be/bmKYiUOEo2A">Conal Elliott - Denotational Design: From Meanings to Programs</a></li>
</ul>
<p>Main job of software designer, which is to build abstractions. What do we build? We build programs. But I don't think we build programs mainly, the program in the sense something you can run. For every program that I make, what's really more powerful in my output, what's more reusable, what's more value, is the libraries I create, so the components out of which I build programs. So every time I do programming I'm really looking for what abstractions are a great fit. If I can already find these abstractions supported of the shelf of some library I'll use them but most often I'm fairly dissatisfied with the building blocks, and so I wanna build my own abstractions, and then build a particular application on top.</p>
<p>This quote I like very much, from the man I respect very much, Edsger Dijkstra:</p>
<blockquote>
<p>The purpose of abstraction is not to be vague, but to create a new semantic level in which one can be absolutely precise.</p>
</blockquote>
<p>So we can be precise and low level, and be precise without being abstract but then it's quite complicated and our cognitive abbilities will soon reach our limit before we realise our aspirations. There's a wonderful paper by Dijkstra called <a href="https://www.cs.utexas.edu/~EWD/transcriptions/EWD03xx/EWD340.html">The Humble Programmer</a>. Highly recommended talking about how we can use our abbilities, by walking into the project humbly realising that I'm gonna reach my cognitive limitations quite soon, then it informs the choices I want to make, I want to use abstractions that allow me to continue making progress even though I have a brain that has to fit in a skull. </p>
<p>So there are three goals, I think of these as my three main goals when I'm doing a software project.</p>
<ul>
<li>Abstractions: precise, elegant, reusable.</li>
<li>Implementations: correct, efficient, maintainable.</li>
<li>Documentation: clear, simple, accurate.</li>
</ul>
<p>I'm gonna talk about precision a lot, and it's not that I think that precision is an end to itself, it's not. It's really these other things, like elegance and reusability. The reason I harp on precision is because it is so easy to fool ourselves and precision is what keeps us away from doing that.</p>
<p>My implementation I'd like it to be fast, right?, but I don't want just fast, I want it to be correct, I care about what I implement. By writing no code I've written a very fast implementation but it's not gonna satisfy any interesting requirements. And of course, I want my program, my implementation to be maintainable, to sort of capture and hold my insights so that somebody coming back at me later can understand what I understood in putting them together.</p>
<p>And then the documentation should also be simple, clear and accurate. So one way to make things simple is to make them inaccurate, I can tell you a simple story that isn't true and at some point I'm gonna harm you by doing that. So I want to tell the truth and to do so simply.</p>
<ul>
<li>Conventional programming is precise only about how, not what.</li>
</ul>
<p>So, I'm gonna say something, maybe a little jarring which is the commonly practiced state of the art of software is something that is, it's precise about how not about what. And I think maybe it's a historical accident, it's kind of the nature of our tool, our computer tool that we have to speak to it unambiguously, but it's only a tool for how, only a tool for sort of half of what we are talking about, or some fraction that we are talking about. And it imposes requirement on precision on us, on ambiguity, and the <em>what</em>, which to me is much more important than the <em>how</em>, it's a more fundamental part of the game, the tool doesn't impose it on us. And precision is hard and hard becomes unpleasant, so I think just for this kind of historical accident we've developed willingness and abbilities to be precise about hows. </p>
<blockquote>
<p>It is not only not right, it is not even wrong.</p>
</blockquote>
<p>Wolfgang Pauli came up with this description which I think applies to most software development. So it's not even wrong because there's no clear question, it's like an answer without a question. So that's what I would say: software without a specification is an answer without a question. Is it right is it wrong? We don't even know what it means. It's not even wrong I would say. And why does this matter?</p>
<p>I love this quote from Bertrand Russell</p>
<blockquote>
<p>Everything is vague to a degree you do not realize till you have tried to make it precise.</p>
</blockquote>
<p>So Bertrand Russell in case you don't know, devoted years and years of his life, this was his life mission, to make things precise that people didn't really understand vague. So he found himself in the european mathematical community and was uncomfortable with the level of precision that was accepted in the day and he started poking at you know, professors and other practicing mathematicians, and they weren't really very receptive. They didn't like having it pointed out that the conclusions they were drawing were perhaps not sound, as they were based perhaps on unsound foundations. So what does it have to do with software?</p>
<p>You might not want to write down a clear specification because you're comfortable, you think I basically know what I'm doing, I've got this kind of assignment, I've had a chat with my coworkers or my boss, or just internally in my head, I basically know what it's for, now let's get to the real work and do an implementation. All I suggest is what Bertrand Russell points out here which is that if you think you know what you're doing but you haven't made precise, you're probably wrong, or you're very likely wrong because the imprecisions don't come to the surface until you really try to make them precise. So don't be reasurred by a kind of informal like, ahaaa.., I pretty much know what I'm doing, it's time to go on. This applies particulary to computer programming, and there's this old,old quote by Demosthenes:</p>
<blockquote>
<p>What we wish, that we readily believe.</p>
</blockquote>
<p>And as a software delevoper, when I'm in the mode of trying to get something done, which is a lot of the time, sometimes I'm like trying to understand, or I'm trying to experince art or something, when I'm in the mode of trying to acomplish a goal, then, then what? The idea that my program might not be correct, or I might even understand what the question means, <em>is it odds with my desire to move on to the next thing</em>? I wanna take a break, I wanna raise, I might just wanna do you other things that are more interesting, so I wish that my program were correct. That means I readily believe that it's correct. So I'm suggesting we have a built in bias to ignore the possibility that we don't even understand what the question is. So not even is it a possibility as Bertrand Russel pointed out that there's an important vaguery hidding but also I think there's, we have an internal psychological bias that makes it quite likely. So that's my pitch for precision, not because precision is important in itself, because it's a way to help us not fool ourselves and we have a tendency to fool ourselves. </p>
<p>I prefer interactive talks to monologues even if I'm a <em>monologist</em>. So absolutely, questions whatever, please pipe up. </p>
<h3 id="denotative-programming">Denotative programming</h3>
<p>Peter Landin recommended "denotative" to replace ill-defined "functional" and "declarative"</p>
<p>Preperties:</p>
<ul>
<li>Nested expression structure.</li>
<li>Each expression <em>denotes</em> something,</li>
<li>depending only on denotations of subexpressions.</li>
</ul>
<blockquote>
<p>"... gives us a test for whether the notation is genuinely functional or merely masqerading. (The Next 700 Programming Languages, 1966)</p>
</blockquote>
<p>So, we are this community that we call functional programming and that term has been around for quite a while. In 1966 Peter Landin has published a seminal paper, <a href="https://www.cs.cmu.edu/~crary/819-f09/Landin66.pdf">The Next 700 Programming Languages</a>, and in this paper he points out that this term that was being used even at the time, functional programming, is really ill defined, it's this fuzzy term along with <em>non-procedural</em> I think is one, and <em>declarative</em> is another. And if you've ever used the internet :smiley:, particulary programming language communities,programmers blogs, that kind of thing, you might have seen people arguing over whose language is more functional, is Scala really a functional language, is Lisp or Scheme functional, is Haskell with IO functional? I've poked around that one. And what I see is that it's easy to start with these conversations and it's very hard to get anywhere helpful. And I think that Peter Landin explained in his 1966 paper why that was, and it's because these terms are not well defined. And he recommended the alternative, and this is what I recommend: I would say, deprecate the term functional and let's talk about something that has clear meaning and then revisit all these conversations if we still want to revisit about whose language is functional and whose not and how to be more in that direction. And Peter Landin suggested the term <em>denotative</em>, defined by having three properties. One is that, we have a nested expression structure, so it's an expression within a expression. And the second is that every expression <em>denotes</em> something. So now we are really getting to the heart of things, it's not just syntax, so structured expressions is syntactic property, but that expressions mean something, <em>denotes</em> something, and that something depends only on the denotations of the subexpressions. So these are his three properties of what he calls denotative language, or denotative programming style. And these three properties, and in particular the third one he says, it gives us the test for whether the notation is genuinely functional, or merely masquerading. So that's why I sometimes I kind of poke around and say maybe that's functional but it's not genuinely functional.</p>
<p><strong>Question from the audience</strong>: <em>When Landin is saying denotation and like today when I'm saying denotation are we talking about the same thing?</em></p>
<p>Answer: Yes, we are. So this paper was published in 1966, there was early work by Chris Strachey, at that time, what he called <a href="https://en.wikipedia.org/wiki/Denotational_semantics">denotational semantics</a>, and Peter Landin, if you haven't heard Peter Landin, Peter Landin is one the few, really kind of founding fathers, founding parents of our discipline, and not just of functional programming but of understanding programming languages. So Peter Landin is extremely important figure in our history, and made contributions. For instance, Peter Landin is the one who realized: "Hey, wait a minute, lambda calculus and programming have something to do with each other." Peter Landin figured out something called <a href="https://en.wikipedia.org/wiki/SECD_machine">SECD machine</a>, that's something like, how can we actually evaluate lambda expressions with a machine, OK? So this is soo, we take this so deeply for granted. Peter Landin was on the ALGOL comittee, and that was where he noticed and he wrote a famous paper called <a href="https://fi.ort.edu.uy/innovaportal/file/20124/1/22-landin_correspondence-between-algol-60-and-churchs-lambda-notation.pdf">A Correspondence Between ALGOL 60 and Church's Lambda-Notation</a>, that's where he was realizing. This is <em>the</em> seminal paper on the idea of domain specific embedded languages. This paper gave rise, I believe, to Scheme, ML and Haskell among other languages. So very infuential. So that's the idea of denotative programming and it's a clearer question. If you ask is Scala functional, it's a non-question, right?, because functional doesn't mean anything, but is Scala <em>denotative</em>? Well, that's a much more interesting question. The question is can we give a semantics to is, in this compositional style, the meaning of an expression depends on the meaning of its components and if so, what does it look like and are we happy with the results? And if we're happy with them celebrate, if we're not happy let's steer. </p>
<h3 id="denotational-design">Denotational design</h3>
<p>Design methodology for "genuinely functional" programming:</p>
<ul>
<li>Precise, simple, and compelling specification.</li>
<li>Informs <em>use</em> and <em>implementation</em> without entangling them.</li>
<li>Standard algebraic abstractions.</li>
<li>Free of abstraction leaks.</li>
<li>Laws for free.</li>
<li>Principled construction of correct implementation.</li>
</ul>
<p>So <em>denotational design</em> is a term I came up with a few years ago, and it's a subject of this workshop and here's a little pitch, a little commercial, so, denotational design, I think it's like a wonderful, natural fit for functional programming, particulary this programming in which we understand specifications in a clear way, and it has these properties, I'm claiming.</p>
<p>It gives us precise, simple and compelling specifications. It addresses both the use of a library, the language so to speak, and it's implementation, but it doesn't entagle them. So, it's entirely clear about what the language means, what that distracting us with the implementation and concerns, and it entirely defines what it means for an implementation to be correct or not. It's correct if and onlf if it's outcome agrees exactly with the denotation. Doesn't mean they have to work at all similarly, in fact, denotations don't work, they just are. Implementations <em>do</em>, denotations <em>are</em>.</p>
<p>It relates nicely to a set of abstractions that have come out of mathematics for last few hundred years, which we have also been using in some modern typed programming language like Haskell and Scala, so standard algebraic abstractions, things like functor, monoid and applicative, and things like that. Foldable, traversable, monad... And if you follow this principle, where ever you follow this principle, what I am suggesting to you, and if I don't convince during this talk, I want you to challange me on it. So, what I'm claiming is that, where you apply this principle you do not have abstraction leaks. And another way to say this, I mentioned earlier today, is that, if you try to apply this principle and you reach a point where it just doesn't work, you have an abstracion leak, and that's a very useful information. It tells me where my abstraction leaks are, I redesign, I eliminate the abstraction leak, and to do it by finding a way to use this principle. </p>
<p>And these abstractions are not, so, a standard abstraction like functor or monoid, it's a set of operations, but those operations have properties so there are laws. If you use this methodology the laws will hold. You cannot use this methodology and define an instance in which the laws do not hold. And sometimes to give you examples today, sometimes this process will also lead you to a correct implementation, in addition to giving you a specification that you can use, you can derive a correct implementation. It may not be the most efficient implementation but definitely it will be correct, and if you have a more efficient implementation in mind then it offers a path, or it suggests there is a path to look for, how do I get to my efficient implementation, from this specification, by sort of, correctness (?) steps, how do I kind of calculate, even though if it takes some ingenuity and creativity.</p>
<h3 id="broad-outline">Broad outline:</h3>
<ul>
<li>Example, informally</li>
<li><em>Pretty pictures</em></li>
<li>Principles</li>
<li>More examples</li>
<li>Reflection</li>
</ul>
<p>So this is what I wanna talk about today. I am going to give you one example that I intend to give rather slowly and thoroughly, and it is a kind of, something I want to invite you to participate in. So this part is not so much a talk, as a seminar or something like that, for us to investigate together how we might do a library design, and the library design in particular is one for inventory, for image synthesis. Something based on some, example came from something I did around the year 2000. So we will go through this process and I hope you get a feel for what it is like for me to do, to apply the denotational design, and hopefully fun example. And then I'll show you some pretty pictures, which, you know, maybe I'll show you the pretty pictures first and then we will reflect and say what are the principles that we used, and then I have a few more smaller examples, hopefully to give some sense this isn't just a one-off thing. And absolutely, discussion, participation, questions, objections, moral indignation, what ever you have, I invite it. <em>And I'm explicitly not asking you to believe anything I say today</em>. OK? I don't want you to believe anything I say because I say it, I want you to try it on and see if it, how it feels to you, which is what I did.</p>
<p>Example I want to talk about is image synthesis and manipulation. OK? That's the assignment. It's either your hobby or you just joined the group and that's the goal. We want to have some kind of groovy, a flexible fun to use library for doing image manipulation.</p>
<ul>
<li>How to start?</li>
<li>What is success?</li>
</ul>
<p>We want it to be efficient to, but I don't think I'm gonna get into that, and in fact my library that I did this is extremely efficient, it runs insanely fast. So couple of questions is, where do we even start?</p>
<p>Like, we're this team, a product development team, and this is our edict, image synthesis library, high-level, fun to use. So how do we start, how we define success?
Any thought on how we start on this project? Assuming some of you are programmers :smiley:</p>
<p>audience: "What are the things we are manipulating with?"</p>
<p>OK, yeah, so what are the things we are going to be manipulating, so, imagery, well, let's get more specific than that, OK? So what kind of things, and then what is success. Well? That's probably very tightly related to this question, so what kind of functionality, so when we implement this functionality and provide it, conveniently, correctly, maybe that's success. We might understand better these question when we come back to them. </p>
<p>So, what is we are trying to build? I'm gonna suggest, we can do this brainstorming, what kind of operations, (...) think this phase is terrific and illuminatig so I just kind of threw out a bunch here. So this is a kind of function that I would imagine would come out of either you know, kind of a clear requirements statement or a brainstorm. </p>
<h3 id="functionality">Functionality</h3>
<ul>
<li>Import &amp; export</li>
<li>Spatial transformation:</li>
<li>Affine: translate, scale, rotate</li>
<li>Non-affine: swirls, lenses, inversions, ...</li>
<li>Cropping</li>
<li>Monochrome</li>
<li>Overlay</li>
<li>Blend</li>
<li>Blur &amp; sharpen</li>
<li>Geometry, gradients, ...</li>
</ul>
<p>So some way of getting stuff into the system manipulation out the system, so it's purely synthetic imagery it's gonna be nothing interesting at all coming in from the outside. If I'm gonna do some kind of manipulation of given imagery well I'm gonna want to import something from maybe some standard file formats, and I'm gonna do all my manipulations, and then at the end I want to give something out, so maybe I have some kind of import/export kind of thing, and those are just the endpoint, now all the interesting stuff is in the middle. </p>
<p>So one thing that comes up alot is spatial transformation so that can be things like translate, scale, rotate, OK? These are all linear, affine transformations they are called, but there are also interesting things like doing a twist in the middle or a bulge, or something like that. And I think I said I will show you some pictures so let's pretend that this is part of our information we get about what we are trying to do, let's see, <a href="http://conal.net/Pan/Gallery/">conal.net/Pan/Gallery</a>, so here are a bunch of pictures I made a long time ago with this language, but not really, these aren't the pictures that I describe, these are croppings and samplings of the pictures I described, so these are things I know how to put on the web, these are the kind of things that can be exported, and each of these is a link to a much higher res version. OK? So this is like a playful exploration of image synthesis. All of these are kind of collections of lots of examples. These maybe give you some sort of feel, as you can see, it's not toward kind of practical problem solving, advertisements or something like that, you know, more playful kind of stuff.</p>
<p>All right, In some of these examples, there's kind of bulges that happen, like a magnifying glass effect, and some there are spiraly things happening which you might think of as, I have something linear and then I wrap it into a spiral, infinitely out, infinitely in. So there are all these interesting non-affine, and then there is turning things inside out, makes beutiful pictures. And there is cropping. I've got some image, and I just wanna like maybe crop a circular region out of it or some funny shape, there is this monochrome image, it may sound kind of silly, but it's actually quite useful, I may just want the images red, just red. Now that's likely to be my final output, maybe I'm a modern artist or something, but still likely even in that case, but combined with cropping and overlaying and things like that it's useful. So another operation is <em>overlay</em>, if I have two images and put one of them in front of the other one, so that shows up quite alot, reality in our image systems are doing that all the time, by looking at here there's all kinds of overlays happening. And then there is <em>blending</em>. I have two images and I want some sort of blend between the two, maybe some kind of linear interpolation, or something like that, some midway point between the two, and then there are area operations which are like blurring and sharpenning so I might have an image that I want all of it or some part of it to be blurred, or I might want to exaggarate trasitions sharpenning it, and there is all kinds of other toys, various geometric things, funny shapes, and then smooth gradients and things like that so, these are the kind of things that we'd like to be able to express.</p>
<h3 id="api-first-pass">API first pass</h3>
<p>So we're gonna define an API that's gonna be used in some language. We get to choose a functional language, maybe we are told to, maybe we get to. So, I wanna talk about designing functional APIs, so what kind of things show up in a functional API? I don't mean what kind of functionality, I mean... :smiley:</p>
<p>Questions: So the observations that transform are a monoid.</p>
<p>Answer: Yes, transforms are a monoid in an interesting sort of way, and I want to suggest we come back to that when we think about how can we elegantly structure.</p>
<p>So in a functional language, in an imperative API the operations are gonna be about how to make up state, initialize it, and side effect it. OK? I've looked at alot of imperative imaging API's and they are like that. Build up some graphic state, set some brushes, you know, this kind of stuff, modify some output that's being accumulated, maybe it's on the screen or an offscreen buffer. So it's all about creating, initializing, modifying state, releasing state, that kind of thing. Functional API's are not like that. Functional API's, we want to describe things that <em>are</em>, and then building blocks for combining them. So we're gonna have instead of state and operations on it, we're gonna have types and values of those types and values of those types, just because that's the kind of programming that we do. So a good question to ask is what types are gonna be involved? OK, we don't yet have to know what those types mean, we can be a little fuzzy about it, because this is a process of clarifying our ideas.</p>
<pre><code class="haskell">type Image

over       :: Image -&gt; Image -&gt; Image
transform  :: Transform -&gt; Image -&gt; Image
crop       :: Region -&gt; Image -&gt; Image
monochrome :: Color -&gt; Image
-- shapes, gradients, etc.

fromBitmap :: Bitmap -&gt; Image
toBitmap   :: Image -&gt; Bitmap 
</code></pre>

<p>This is an example of taking the previous slide and starting to give it some concrete shape, some concrete specific shape and again, so far it's just the API, it's not what anything means, and certainly not how to implement it.</p>
<p>So we might have a type <code>Image</code>, so imperative API's don't have a type <code>Image</code> or if they do, they mean something off at of a file, or something like that, they don't mean it in compositional sense. But we instead of composing side effects, we're composing images. It's a functional language, so the idea of rendering or displaying or updating screen is not even part of the API, we're just talking about what the images are. So in each of those operations I mentioned in the previous slide, it's gonna show up somewhere as an operation with a type. So overlay for instance, is something that takes two images and gives an image, and in imperative API you dont' see overlay. You see a couple of pieces of code that do side effects, one of them being executed after the other, that's how overlay shows up in an imperative API, and our API overlay is an actual operation in it and it is about, or the expression of overlay of two images, it doesn't mean it goes anywhere, it doesn't mean it modifies anything yet. For instance, we might never use the result, or we might use it more than once, or we might transform it somewhere before it shows up. So that's overlay.</p>
<p>And then there's transformation. If I have an image I might want a bigger version of that same image, or a version somewhere else, or a version that's been interestingly warped, so that's what transformation does, that's what transformations are for. Makes sense so far?</p>
<p>Cropping also, we want to crop an image, what we need to describe some shape, I'll call that a region, so, what do I mean by image, what do I mean by region, what do I mean by transform, all this is gonna become clear, that's the creative process.</p>
<p>And then, a monochrome image, I just give it a color, and I get an image of that color. And you might expect me to say, a color and how big it is or something like that, but we'll come back to that question if we have enough argument here.</p>
<ul>
<li>question from the audience:</li>
</ul>
<p>You're wondering why monochrome doesn't say give me a color and an image and I'll give you an image? Aha.. What would that operation intuitively, what would it mean informaly? Oh! I see, I have an image, and I want you to make that image red or something like that. Yeah, that's interesting. So here's a question which we kind of put up in the air, can we describe that operation, can we build it out of simpler parts? One of my goals, I'll make that explicit, is I want to define the simplest possible building blocks. If I have something that is somewhat complex operation I'd really like to make it not be permanent but definable out of simpler pieces. Why? So that I have a simpler set of primitives that I have to figure out what they mean and how to implement them. Like Robbies talk this morning, his keynote about this macro system, it's very nice to have a small set of language primitives, this is part of the ethos of Scheme, very small set of language primitives and then the abbility to define richer things in terms of simpler things and it means that my core is quite simple and implementation of those more complex can be quite simple by translation or if you want that specification you can more efficient implementation(?).</p>
<ul>
<li>question from the audience:</li>
</ul>
<p>So already some critique of this API, <em>overlay</em>, that sounds a bit ad-hoc, aren't there other way to combine images besides this one, and maybe this one can be built out of something simpler or more general. Yes, and I completely agree. So, what I am doing here, and absolutely welcome what you are doing, you're getting a little ahead which is fine, this is participatory, this is your talk, this is our session together, so we could, throw these all ideas up, and then critique them or we could critique them while we throw them up, it doesn't matter. There may be some personality issues, like I'll get really offended if you challange my idea or something but I actually won't so we don't need to do that. Yeah.. So already <em>overlaying</em> sounds suspiciously specialized. And in this last two we're just getting the information in and out of the system.</p>
<p>But it's important, I'm not assuming that <code>Bitmap</code> and <code>Image</code> is the same thing, so what I am assuming is that there's this thing called bitmap which is like a jpeg, or who knows, it's just this kind of array of pixels which you know, have some kind of depth and that kind of thing, assuming there's going to be some stuff outside that we're going to want to bring some information in, do cool stuff, and then also after we're done with cool stuff, we're going to put out into. But I don't want to assume that that's what we mean by <code>Image</code>, and we will discuss there are very good reasons to not make that choice.</p>
<ul>
<li>How to implement?</li>
</ul>
<p>Now let's talk about how to implement. :smiley:</p>
<ul>
<li><em>wrong first question</em></li>
</ul>
<p>Let's <em>not</em> talk about how to implement, OK? So, I enjoy implementation, I am guessing you enjoy implementation or you wouldn't be here, but it's not a good first question, in part because it's not a well defined question. <em>How</em> is an answer, <em>what</em> is a question. How do we implement what, how do we implement this, No, we don't even know what this means, what's an image, these are just kind of intuitive and formal ideas, so let's be more clear about what these mean and then ask the question of how to implement. Does that makes sense, or let me put it differently.. Is that? Is there anybody who will like to go more into, more about the separation between why we would wanna make something more clear other than how to implement it at this point? I don't hear it talked about a lot anymore this distinction between specification and implementation.</p>
<ul>
<li>Question from audience:</li>
</ul>
<p>Identify symmetries? ... Ah, are you asking am I sort of content with this API? Is that what you are asking? I'm just making a guess, I don't think I'm right, I'm just trying... How they would be used? ... OK, by symmetries, do you mean, hm, maybe there's some structure that I realize I could refactor? Or... do you mean something like visual symmetries, I'm guessing you don't but maybe you do?... Oh, yeah, yeah, understanding maybe the set of images that are expressible in this form? :smiley:, I think I'm not converging, but I'm roughly, infinitely patient, (Smiles) about understanding what you are wanting to say. OK, ok, come back to it, and say oh! now I know how to get this through your thick skull Conal.</p>
<p>So, <em>how to implement</em>? NO (:smiley), different question, OK? What to implement? OK, and we did not just say what to implement in a precise way, so let's get more precise, so.</p>
<ul>
<li>What do these operations mean?</li>
</ul>
<p>What do I mean by mean? There's a more fundamental question which is what do the types mean.</p>
<ul>
<li>More centrally: What do the <em>types</em> mean?</li>
</ul>
<p>Once I know what the types mean, then I can at least understand the question of what do the operations mean, because the operations say, <em>over</em> takes two images and gives an image, we can't possibly talk about what over means without understanding what an image means, right? Because it's a function on images and gives an image. So this is the central question. Doing the API design we're going to define some types, types of values, because we are doing functional programming, and type functional programming in particular and we want to say what do the operations mean.</p>
<ul>
<li>Question from the audience:</li>
</ul>
<p>OK, let me see if I got you, and I want to encourage people to sit closer, for two reason, one is to be more included, and the other is for me to hear you more easily. If you don't want to do that I'll just try harder to hear. So, I think what you are asking is, when you say <em>mean</em>, do you mean how to implement them, and if you don't mean that, what do you mean? OK, thanks. Yeah, I absolutely <em>do not</em> intend to say how do we represent the types or how do we implement the operations, so that would be confusion. What I really mean is to clearly specify, I want to give some formal specification, somehow, that tells me as an implementor exactly what it means ... It's not that it tells me whether my implementation is correct or not, it tells me what it would mean for an implementation to be correct or not, that defines correctness. <em>Then</em> I know what to aim for. OK? It also tells me the breadth, so I want to be constrained enough to know what correctness is, I don't want to be over-constrained because I don't want to be told how to implement something, because I may have a lot of ideas, and here I'll maybe touch on some of the ways I've implemented this vastly different from each other, OK? So I don't want to be constrained in an implementation, or representation. I do want to get very clear, about, something about the specification, and there's a particular style of specification, and that's the one I'm talking about today, which is <em>denotational</em>. And I'll show you supersoon what that looks like. I am so sorry that's freezing in here, right? I think it's even worse for you than for me there. It's blowing here, yeah I don't know... So I appreciate you hanging in, if you have to leave, if your face turns blue, I won't be offended.</p>
<p>So, central question for me is <em>what types are there and what do they mean?</em>. What is a mathematical model that I can use to think about those types in a precise way.</p>
<p>So here, so far, the central type of interest is <code>Image</code>. There were some other types, transforms, colors, regions. So let's start with one, let's start with images. So what is an image?</p>
<p>Specification goals:</p>
<ul>
<li>Adequate</li>
<li>Simple</li>
<li>Precise</li>
</ul>
<p>Before entering that question what do we want out of an answer and I am suggesting these three properties. I want my mathematical model to be adequate, if it's not adequate then I can't express the things I want to express. Either I want to or my users. It has to be simple. Why does it have to be simple? It's because I'm basically not very smart, I mean, I mean I'm smarter than a mouse, right? But I'm hopefully not as smart as my children will be and so on, and all of us collectively so I have very limited ability. So I need the specification to be simple enough that I can reason practicably and reliably. And then precision. And why? So that I <em>really</em> have simplicity and adequacy, not just think I do. So precision is all about helping me not fool myself, because I'm psychologically inclined to fool myself, so precision is a coping mechanism. OK?</p>
<p>Now, let's go back to this question what an image is.:smiley:. This is a collaboration. What is an image? OK? And I want a lot of bad suggestions, I want lots of stupid ideas, what I really mean is, you know, please don't be shy about making suggestion, because every suggestion is illuminating either for it's strengths or it's weaknesses or both, and I apology for flashing my answer which I didn't mean to bias you with.</p>
<p>When I've done this exercise, people have quite a variety of intuitions. It's what? A matrix of pixels? Sure, totally. So by matrix of pixels I assume you mean some kind of rectangual, regulary spaced collection of pixels and a pixel is... yeah, colors or maybe something that represents like 24-bit values to be interpreted in certain way. Yeah, so that's a very common answer, so it could be an array or matrix of pixels. Other? Oh, OK, so already we are getting criticism from the very start, programmers.. yeah, so maybe there's a little bit of a discrete bias here that we might wanna question. (Listening to a question)... OK, so it's sort of functioney view, yeah, and last year I talked about this before I talked about FRP, and so nobody made that suggestion but that's certainly one possibility as absurd as it sounds. :smiley: Anybody else? You'll see I'm joking, hopefully at least... A way of collecting and saving light? Sure! Yeah, absolutely. And so we might think that it's a way, hmm, that might being an algorithm, a function, a recipe, something like that, yeah, so, not to hurl insults, but an object oriented sort of perspective might be about it's an interface that has some kind of operations.. yeah, other thought? Yeah, sure, so an image might be represented by a collection of shapes, so for instance, in something like a pdf or postscript, yes, so pdf and postscript are all about image synthesis and manipulation, and they are all about geometry, so it could be some shapes, in other words some descriptions and then... totally, yeah (seeing?) graph, or it's called linear that's all that was. No, I worked in computer graphics, (shiver of disgust?)... so yeah absolutely, It could be some kind of data structury thing which contains in it some kind of descriptions of objects, 2 or 3d dimensional, some description of lights and cameras, kind of some information out of which one can synthesise an image, and a lot of particulary 3D API's are that way... OH! That sounds like a poets answer to me. So, Dicks contribution is, yeah an image is a short line or a short body of text that conjures a what in someones mind? Oh, conjures a picture in the readers mind, I see. I might recursively ask you what a picture is and wonder if you're gonna tell me it conjures an image in readers mind but I won't do that. Thank you. Yeah, absolutely, so again it's something that's like evocative in a sort of more poetic end of the spectrum than like a 3D scene graph API kind of a thing... Cool, so here is an interesting perspective is that maybe we were a little too focused on color, so an image is being sort of color over the discrete, continuous and finite, infinite whatever space, maybe there are other things as well that we maybe want to array over space. Maybe it's the overspaceness that matters more. Yeah, OK. </p>
<p>So we can take all of these suggestion, if we are doing kind of classic brainstorming write them up on the board. We have our goals which I suggested here and we can evaluate them all and see where they lead. If we leave out precision we are not gonna get a very accurate estimate of where they lead, because for instance, simplicity, many ideas are simple only because they are not precise and when made precise they become quite complex, or their complexity becomes apparent. It's cold, sorry, god..</p>
<p>So my personal answer which especially if you've been listening me talk about FRP is perhaps somewhat perdictable, so my answer is it's an assignment of colors to 2D locations and I'll be more clear what I mean by that.</p>
<ul>
<li>My answer: assignment of colors to 2D locations.</li>
</ul>
<p>This is sort of the same answer in a less specific form than an array or a matrix of pixels. So that's, you know, an array it's an assignment for every slot in my array I assign one color to it, but it leaves kinda little more open ended what the shape of the container is. </p>
<ul>
<li>How to make precise?</li>
</ul>
<pre><code class="haskell">type Image
</code></pre>

<p>If we start with this intuition, and then we want to make it precise so that we can understand the implications of it, we can do this to every idea that we've talked about, and some of them we might learn very early what some of it's limitations are, and that's an extremely fruitful part of this exercise. So let's make this precise, and here's the form in which I do it and this is the denotational form. </p>
<pre><code class="haskell">mu :: Image -&gt; (Loc -&gt; Color)
</code></pre>

<p>So we have a function, I'm calling it <code>mu</code> (greek letter), mu is supposed to suggest <em>meaning</em>, <em>m</em> right? So mu is a meaning function and the idea is that I want to say what an image means, or give you a model for relating to images, by, it's a mapping so mu is a mapping from images to something, and that something I'm saying is assignment of colors to locations and there's a simple precise to say that which is a function from location to colors. OK? Now over here on the right, so on the left of this main arrow, is the type we are interested in (<code>Image</code>), on the right is another type (<code>Loc -&gt; Color</code>), for the most part you can think of that type as being, what we mean by functions in Haskell, what I really mean is mathematical functions, which <em>is</em> what we mean by functions in Haskell, but it's not what we mean by functions in most other languages, like an ML function, a LISP function, a Scala function, is it a function because it has side effects? I mean really a mathematical function. So you can either think of it as a math function, or you can think of it as a kind of a function in a purely functional language. But it's kind of important to make that distinction because it doesn't have to be implementable, OK?, because we're never gonna implement <em>mu</em>, we're just gonna use it to understand our library design and evaluate it as it emerges. </p>
<ul>
<li>What about regions?</li>
</ul>
<p>OK, so but <code>Image</code> was just one type, and I'm not saying that you should somehow know why this is a good choice, we're gonna look at it, I think. And then we can examine alternatives. So what about regions? Well, anybody have an idea what a region might mean? Locations to what? Ah... to opacity? Interesting, OK. So we might also talk about opacity over space, any other thoughts? Oh, a list of locations, yeah, that's actually quite common, used, in awful image, I don't mean this is an awful suggestion, what I mean is it so happens that a lot of the image, strike the word afwul, that choice shows up in a lot of them, often in a kind of compressed form, it maybe like a set of rectangles, that's quite common?... A function from location to boolean, quite similar suggestion as well, yeah, OK, same suggestion. And then... yeah sure, (?) polygon, so I might have some primitives for describing my regions, like polygons, and then I might mean a bunch of them, a union of them, perhaps countable, interesting choice, countable... </p>
<pre><code class="haskell">mu :: Region -&gt; (Loc -&gt; Bool)
</code></pre>

<p>So this is my choice, this is one of them, which is it's a function from locations to booleans, if you known this. Function to boolean is isomorphic to another mathematical notion that we use a lot, I hope you know this, which is sets. So function from location to boolean is the same as set of locations, something called characteristic function if you took math a while ago like I did. So another model is to say a region, the meaning of a region is a set of locations, that's very similar to the suggestion of a list of locations. So we could also say it's a set of polygons but a set of polygons is a more complex, it's maybe more efficient, but uh wait a minute, we're not talking about efficiency, that's a non issue yet, we may want to represent out set by a collection of polygons for instance... OK, let try to get what you're saying, so one was an idea and the other was a kind of motivation for it I think. OK, so I might say that a region is a function from, it's something that takes an image and a point and, an image and a location and says, it either says there's nothing here, or there is something here and this is what color there is. OK, so that would be some kind of relationship between like a region and an image right? I would hope that something like that because it involves both could be describable in terms of simpler pieces, let's see if that's the case... Oh, I see.. So let me try and tie this idea. Suppose we had a notion of a region which is a set of locations, in other words, a function from locations to bool, I mean, maybe that's not obvious to everybody. So the equivelancy or those two notions is, if I have a function from locations to bools I can think of it as a set, a set is just a question of are you in or are you out, and that's what the question that location and bool answers. So if I have a set I can form a function, just by saying are in the set or not. If I have the set I can form the function, but by asking the question given any location, are you in it, and if so yes, if not no. So given this simpler notion of regions, yeah, we can I think take that region, aha.. interesting, OK. So we can ask questions like, what is the set of all points in space that have some color, or what's the set of all points that have a particular color, I'm not sure we get to the expressiveness of what you're suggesting, that's interesting, we might come back to it.</p>
<p>Ok, so here are a couple of models and this is the style that I mean of giving a meaning to image. Once we have, once we choose some, now we can go back to the operations and say what do they mean <em>on the meanings</em>. How do the operations work as if they were on meanings of images rather than on images themselves. So an image is going to be some datatype, it's going to have some representation, some runtime existance, the meaning is going to be a mathematical model, and have no runtime representation, no runtime existance, but it'll tell us what it means, what these operations mean, it'll give us a specifications I hope we'll see.</p>
<h3 id="specifying-image-operations">Specifying <em>Image</em> operations</h3>
<pre><code class="haskell">mu (over top bot)    == ...
mu (crop reg im)     == ...
mu (monochorme c)    == ...
mu (transform tr im) == ...
</code></pre>

<p>Aaa, thank you, why didn't I just not use set? Hmm.. I haven't thought about that question in a while, and absolutely I find myself explaining this idea of region as a characteristic function in terms of the set, so I think that tells you and me, now that I think about it, that a set definitions, it feels a little more natural, a region is a set of points, that's it. So, let me change my mind, and say a region is going to be a set of points. Then I'll change my mind and get back to this one. OK? That does seem more natural, let's do that instead. So I don't mean something of type <em>set</em> in Haskell, for instance, which is finite, I don't even mean countable sets, because I want to say like, a disc is a region and it has uncountable, well, I'm getting ahead of myself, it's got a lot in it, so yeah, I mean set in the mathematical sense. So now given this model... yeah absolutely... OK, so there is awful a lot of sets, :smiley:, an awful lot of sets, maybe more sets than I really am interested in using, there's definitely more sets than I can possibly express in any language, right? That's one of the things, a corollary of Cantor's work in the 1800s. Yeah, sets seem maybe awfully ambitious, or awfully sloppy when you think about it. I really may want a much smaller, yeah, so am I tracking? Yeah, so one of the tradeoffs I make is I might make the denotation less precise, in another words have room for a lot more than I can express in order to make them simpler. And we might come back to that if there's interest and talk about that tradeoff... Interesting, so will we need some properties of sets which is going to restrict the kind of sets we can talk about, for instance, measurability, and measurability might be quite relevant to our ability to render something because we're going to render in pixels, and pixels cover entire areas, yeah, and if we want something like the integral of a function over the area, or something like that, then measurability is going to come into play, some form of measurability. So I don't know, we'll see, great question. (56.56)</p>
<h2 id="brian-beckman-dont-fear-the-monad">Brian Beckman: Don't fear the Monad</h2>
<p>What I want to do is take the mystery out of monads. Monads without mystery or maybe monads without <em>misery</em>. Because if you've looked at link(?), or you've looked at F-sharp, or a much smaller number have looked at Haskell, you've encountered monads and they're scary the first time you encounter them. The main reason they're scary is you read the papers and they tell you oh, well, you need to know category theory before you can understand this, and while that's strictly speaking is true, it is not true that you need to know category theory to understand <em>how</em> monads work, what they're good for and even better yet, how to <em>creatively</em> use them yourself. Let me talk about foreign languages for a second, if you learn french or something, there are sort of three phases that you go through, the first is you hear french and you say, oh my goodness I'm scared to death of this, the second is, you learn a little bit of french, and you can recognize french words and you can read a little bit with a dictionary, and then the third and final phase is you can use it creatively in your own work, just speak freely. Those are the stages of learning any kind of new foreign concept. Monads are the same way. Everybody goes through this the first... The first encounter is horrifying, there is this strange concept and are you telling me I need to understand this strange bizzare concept in order to do anything with functional programming. Well, yeah the answer is yes, but what I want to take out of it is the strange and horrible part. It isn't strange and horrible, I'm going to explain it in terms of things you already know, I promise.</p>
<p>Question: What the hell is functional programming? In three minutes or less, just quickly so that people can get to speed as to, they can then put the pieces together why monads would make sense in the context of functional programming?</p>
<p>Not only do they make sense, they are a natural outgrowth of functional programming, you would invent them yourself if you've worked at it long enough, you would know the category theory, you would know the column monads, you would just call them <em>better</em> functions, that's what I am going to show you, but functional programming in a nutshell, is programming with functions. Yeah, right on... </p>
<p>But normally, let me start scribbling on the board. Normally we are used to doing things like this in say, in C#:</p>
<pre><code class="c-sharp">int x:

static int f(nt x)
{
  ...
  y = Math.Exp( (double) x)
  returns y;
}
</code></pre>

<p><code>Int x</code>, and then we'll go some place and say, just for simplicity let's make everything static, we're inside some class here, right? And we say, <code>static int f(int x)</code> and it does something with the <code>x</code>, and it returns, oh maybe returns some <code>y</code> that's inside a function, let's make it do something, like <code>y = Math.Exp ( (double) x)</code>, it's already starting to look like a lot of stuff, but the important part is, we have a function <code>f (int x)</code> that takes an <code>int</code> as an argument and returns an <code>int</code> as a result. Nothing scarry there, functional programming is taking these guys (<code>f(int x)</code>) and saying not only are these guys not scarry, they're so ordinary that we're going to treat them just like we treat these (<code>int x:</code>) guys. These <code>x:</code> guys are <em>data</em>, these (<code>f</code>) guys are <em>code</em>, in functional programming we just say, well code is data too, we're not scarred of it. Now, let me introduce a little bit of notation, I'm gonna stop writing C-sharp, this is where it's gonna get a little intense, but I promise it will all be things you already know. <em>Great!</em>. If you know a function, you know everything you need to know to understand monads. </p>
<p>Question: <em>So, look, a function takes input and... but always returns something right? That's what function does, it does stuff, gives you functionality.</em></p>
<p>It takes an input, and converts it into an output. That's your bread and butter, but the bread and butter is you just start tossing these (<code>f</code>) things around as easily you toss these (<code>x:</code>) things around. In ordinary programming, C-sharp, imperative programming, we think of data as being in one world, and then we think of these functions as stuff that operates on data, and they're special. In functional programming we say they're not special, functions are just like data. Let me prove to you that a function is like data. Every imperative programmer goes through this phase of learning that functions can be replaced with table lookups, often you do this for performance. You want to create the <em>sine</em> function, or the <em>cosine</em> function, make a big table and interpolate in the table, you don't actually sit there and do... everybody learns this trick. What's a table? <strong>Data</strong>. What is the function doing? Is looking stuff up. The act of <em>looking up</em> is universal. You could convert any function into a table lookup and then the functionality, the code, is the same for all functions, and the function is just data. Hmm... interesting, there's your proof. That concept alone should convince you that functions are of the same kind of thing as data. They're not special, you don't need to have special code for every function, since it's possible theoretically to convert every function into a table lookup and to have the evaluation part, the code be completely generic. Functions and data, data and functions, same thing. Think all <em>nouny</em>, no <em>verby</em>. :smiley:</p>
<p>Question: <em>So now, I mean, then I guess just quicky catch up, just so we get some of the confusion out of the way, when you think about the importance of say F-sharp, Haskell, definetly Erlang and the multicore world that everybody is talking right now, it has to do a lot with the notion of no shared state, no shared mutable state. That's right. Now, is that just a consequence, or a side effect of a side effect free language, like a functional language? Let's talk about shared mutable state and functional programming. Sure, so quickly.</em></p>
<p>Pure functional programming, as in Haskell does not allow any state at all. Functions, once you create data, that's it, you created it, if you say <code>int x</code> equals <code>5</code> than x is 5 for ever and ever. It sounds like it's not possible to do much of anything useful with the language like that but in fact you can do almost everything you can do, you can't do shared mutable state, but you can simulate it with monads. Yes!</p>
<p><em>Now we'll stop talking.</em> No, you don't need to stop talking, because I want you to stop me any place where it's, where I'm starting to get confusing. I promise, and I will explain monads in things, in terms of things you already know and I'm going to go through four steps. </p>
<ul>
<li>One is Functions</li>
<li>The second is Monoids. You don't know the word but you know what they are.</li>
<li>Functions again, I'll come back to them and then</li>
<li>Monads</li>
</ul>
<p>And this stuff is <strong>easy</strong>. It's conceptually very very simple, very very easy to explain, but you have to be willing to go with a little bit of a terse notation. Instead of saying <code>int x:</code> I wanna say <code>x : int</code>, and there is a very good reason I'm gonna do this. This phrase up here (<code>int x:</code>) says the variable <code>x</code> <strong>has type int</strong>. In mathematics you would say <code>x</code> is a member of the set of ints (x elem ints). Types and sets are almost exactly the same thing. I wanna write it with a colon here (<code>x : int</code>) because I want to put the types on the right hand side. This is an insertion <code>x</code> <strong>has type</strong> <code>int</code>. It means exactly the same as this. </p>
<p>We are now leaving the realm of C-sharp and entering the realm of F-sharp, or the realm of functional programming when you see notation that looks like this.</p>
<pre><code class="f-sharp">x : int
</code></pre>

<p>Now let me write the type of a function. A function, remember how I wrote it before, this was (<code>int f (int x)</code>), now I have a very compact notation, I can say <code>f : int -&gt; int</code>, a function <code>f</code> is a thing that takes an <code>int</code> and gives you an <code>int</code>. That's all it means, nothing more, nothing less. Next step. Instead of picking a particular type let me pick <em>any</em> type, and I'll use the word, the symbol <code>a</code> for <em>any</em>. </p>
<p><code>x : a</code>. <code>x</code> colon <code>a</code> means I am asserting that <code>x</code>, the variable <code>x</code> has type <code>a</code>. <code>f : a -&gt; a</code> means I am asserting that the function <code>f</code> takes an <code>a</code> and gives you an <code>a</code> for <code>a</code> being any type.</p>
<pre><code class="f-sharp">x : int
f : int -&gt; int
----------------
x : a
f : a -&gt; a
</code></pre>

<p>Now, I'll go back to C-sharp for one last, one last little dive into C-sharp, this would be, you could say something like <code>static a f &lt;a&gt; (a x)...</code>. This (<code>f : a -&gt; a</code>) is just short hand for <em>generic types</em>, stuff you already know, I promised you that wouldn't be anything you don't already know. We know types, we know generic types, we're not scared, we're almost to monoids.</p>
<p>Let me add another function down here. This is a function <code>g</code> and I assert that my function <code>g</code> is a guy who takes an <code>a</code> and gives you an <code>a</code>. (<code>g : a -&gt; a</code>)</p>
<p>I now want to combine my two functions <code>f</code> and <code>g</code>. How can I combine them? <em>Make them one function?</em> Yeah! I can make them one function, there are couple of different ways of doing that, let me show you one. One way would be to say, take <code>g</code>, feed it a variable of type <code>a</code>, now I'm reusing the notation. The little <code>a</code> here (<code>g (a)</code>) means <em>a variable of type little a</em>. You forgive me for that, this is not at all confusing. This is, call <code>g</code> with a variable of type <code>a</code> and then call <code>f</code> on that result, <code>f (g (a))</code>. That would be one way of combining these functions. Another way would be to call <code>f</code> first, <code>f (a)</code>, and then feed that result to g, <code>g(f(a))</code>. Now, I'm going to take away the brackets, the reason is they are visually annoying. I'll leave this up here so that we are reminded that <code>x</code> has type <code>a</code>, <code>f</code> has type <code>a</code> to <code>a</code>, <code>g</code> has type <code>a</code> to <code>a</code>. In functional programming, we like to write function application, which means calling a function, function application, calling a function, sit in it. I promised you stuff you already know, nothing new.</p>
<p>We like to write function application like this, <code>g a</code>. It looks like multiplication in ordinary mathematics. That's on purpose, because if <code>g</code> is a linear function and linear functions are special and happy and really cool, it is multiplication, so we make it look multiplication for any function, even if it's not a linear one. Not only does this get rid of brackets, but it reminds us that in the case of linear functions we have exactly this. Now, if I wished to, this is calling <code>g</code> with an argument of type <code>a</code>, now I write my combination, this time I need brackets, <code>f (g a)</code> and I won't go into this, the reason you need one pair of brackets here is because of <em>currying</em>. Currying has to do with functions of multiple arguments, I won't get into it today, but suffice it to say, if I chain a bunch of functions together, it associates to the left, <code>f h g = (f h) g</code>, automatically the brackets squeeze up on the left hand side in this kind of functional notation. This is standard in Haskell and F-sharp, nothing scarry here, just something you have to get used to. If you want to call <code>g</code> first and then <code>f</code> you have to write it this way. If you wanna call <code>f</code> first on <code>a</code> and then <code>g</code> write it this way, <code>g (f a)</code>. </p>
<p>Let me now abstract, let's stare at this one for a second. <code>f (g a)</code>. Suppose, let me invent a notation, I'll call it little circle, <code>(f . g)</code>, <code>f</code> little circle <code>g</code>, this is a new function and the definition of this new function is that if I <em>apply</em> this new function <code>f . g</code> to the argument <code>a</code>, (<code>(f . g) a</code>), this is exactly the same as calling <code>f</code> with the result of calling <code>g</code> on <code>a</code>.</p>
<p><code>(f . g) a = f (g a)</code></p>
<p>This is a new function. I can now get rid of the <code>a</code>. I can't get rid of it on the right hand side, but I can get rid of it over here and I can give this new function a name, <code>(f . g) = h</code>. I can just say <code>h</code> is a new function, what's it's type? We know the type of <code>g</code> is <code>a -&gt; a</code>, we know the type of <code>f</code> is <code>a -&gt; a</code>. I took an <code>a</code>, I gave it to a <code>g</code> I get an <code>a</code>, I take an <code>a</code> I gave it to <code>f</code> I get an <code>a</code>. The type of this <code>h</code> thing  has to be something that takes an <code>a</code> and gets an <code>a</code>. Look what we've done! <code>(f . g) = h : a -&gt; a</code>. We've taken two things of the same type, a function (<code>f</code>) and a function (<code>g</code>), and we have created a new thing of the same type, <code>h : a -&gt; a</code>. That is the essence of a <em>monoid</em>. The essence of a monoid, you have a way of taking two things of the same type, and creating another thing of the same type. This is an immenseley powerful concept, it enables you to create complexity starting with simplicity. I have a bunch of simple building blocks, I have a rule, little circle, for combining these building blocks in arbitrary ways, all it has to happen is the types line up and I get new things of the same type.
(16:27)</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../books/" title="Books" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Books
              </div>
            </div>
          </a>
        
        
          <a href="../online-lectures/" title="Online-lectures" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Online-lectures
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.22b62ea4.min.js"></script>
      <script src="../assets/javascripts/bundle.5f27aba8.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: [],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.f6ebf1dc.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>